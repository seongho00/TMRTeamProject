<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="common/head::head">
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.5.0/chart.min.js"></script>
</head>
<body>
<header th:replace="common/mainHeader::header"></header>

<div class="relative w-full h-[440px] bg-[#E94876] text-white">
    <div class="mx-auto max-w-[1600px] px-6 lg:px-10 py-10">
        <div class="grid grid-cols-1 lg:grid-cols-[380px_1fr] gap-8 items-start">
            <!-- 왼쪽 타이틀 -->
            <div class="space-y-4">
                <h1 class="text-2xl font-semibold leading-tight" th:text="${dashboard.getAdminDongName() != null ? dashboard.getAdminDongName() : '행정동 미지정'}"></h1>
                <p class="text-lg font-semibold leading-tight" th:text="${dashboard.getBaseYearQuarterCode() != null ? dashboard.getBaseYearQuarterCode() : '분기 -'}"></p>
                <p class="text-xs text-white/80">최근 분기의 최댓값 비교</p>
            </div>

            <!-- 카드 3개 -->
            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8">
                <!-- 유동인구 -->
                <section class="rounded-2xl bg-white text-gray-900 p-6 lg:p-8">
                    <div class="relative w-60 h-60 mx-auto rounded-full grid place-items-center"
                         th:style="'background: conic-gradient(#007bff ' + (${dashboard.getFootPercent() != null ? dashboard.getFootPercent() : 0}) + '%, #e5e7eb 0);'">
                        <div class="ring-center">
                            <div class="absolute inset-4 rounded-full bg-white grid place-items-center text-center">
                                <p class="text-sm text-gray-500">분기별 평균</p>
                                <p class="text-xl font-semibold" th:text="${dashboard.getTotalFloatingPopulation() != null ? @fmt.peopleCompact(dashboard.getTotalFloatingPopulation()) : '-'}"></p>
                            </div>
                        </div>
                    </div>
                    <h3 class="mt-6 text-center text-lg font-semibold">유동인구</h3>
                </section>

                <!-- 평균 매출액 -->
                <section class="rounded-2xl bg-white text-gray-900 p-6 lg:p-8">
                    <div class="relative w-60 h-60 mx-auto rounded-full grid place-items-center"
                         th:style="'background: conic-gradient(#007bff ' + (${dashboard.getSalesPercent() != null ? dashboard.getSalesPercent() : 0}) + '%, #e5e7eb 0);'">
                        <div class="ring-center">
                            <div class="absolute inset-4 rounded-full bg-white grid place-items-center text-center">
                                <p class="text-sm text-gray-500">분기별 평균</p>
                                <p class="text-xl font-semibold" th:text="${dashboard.getMonthlySalesAmount() != null ? @fmt.krwCompact(dashboard.getMonthlySalesAmount()) : '-'}"></p>
                            </div>
                        </div>
                    </div>
                    <h3 class="mt-6 text-center text-lg font-semibold">평균 매출액</h3>
                </section>

                <!-- 업소수 -->
                <section class="rounded-2xl bg-white text-gray-900 p-6 lg:p-8">
                    <div class="relative w-60 h-60 mx-auto rounded-full grid place-items-center"
                         th:style="'background: conic-gradient(#007bff ' + (${dashboard.getStorPercent() != null ? dashboard.getStorPercent() : 0}) + '%, #e5e7eb 0);'">
                        <div class="ring-center">
                            <div class="absolute inset-4 rounded-full bg-white grid place-items-center text-center">
                                <p class="text-sm text-gray-500">업종 수</p>
                                <p class="text-xl font-semibold" th:text="${dashboard.getStoreCount() != null ? dashboard.getStoreCount() : '-'}"></p>
                            </div>
                        </div>
                    </div>
                    <h3 class="mt-6 text-center text-lg font-semibold">업종 수</h3>
                </section>
            </div>
        </div>
    </div>
</div>

<div class="relative w-full bg-white">
    <!-- 메인 섹션: 상권 분석 + 부동산 매물 카드 그리드 -->
    <!-- Tailwind CSS 사용 가정 -->
    <div class="mx-auto max-w-[1200px] px-6 py-16">

        <!-- ===== 상단: 상권 분석하기 ===== -->
        <header class="mb-10 text-center">
            <!-- 제목 -->
            <h2 class="text-3xl font-semibold tracking-tight">상권 분석하기</h2>
            <!-- 부제목 -->
            <p class="mt-2 text-sm text-gray-500">상세한 분석과 유용한 정보 보기</p>
        </header>

        <!-- 카드 3개 그리드 -->
        <div class="grid grid-cols-1 gap-10 md:grid-cols-2 xl:grid-cols-3">
            <!-- 카드 1 -->
            <article class="flex flex-col items-center">
                <!-- 카드 썸네일(대신 일러스트/그래프 자리) -->
                <div class="aspect-[16/10] w-full rounded-t-2xl bg-gradient-to-br from-blue-100 to-blue-200/60 grid place-items-center">
                    <!-- 캔버스 느낌의 미니 도넛 -->
                    <div class="relative w-28 h-28 rounded-full"
                         style="background: conic-gradient(#2563eb 68%, #e5e7eb 0);">
                        <div class="absolute inset-3 rounded-full bg-white grid place-items-center">
                            <span class="text-sm font-semibold text-gray-800">68%</span>
                        </div>
                    </div>
                </div>

                <!-- 본문 -->
                <div class="p-6">
                    <h3 class="text-xl font-semibold">위험도 분석</h3>
                    <p class="mt-2 text-gray-600 leading-6">
                        유동인구·매출 변동성·폐업률 지표로 상권 리스크를 점수화해서 보여줘. 최근 분기 기준 비교도 가능해.
                    </p>

                    <!-- 하단 정보 배지 -->
                    <div class="mt-4 flex flex-wrap gap-2">
                        <span class="inline-flex items-center rounded-full bg-gray-50 px-2.5 py-1 text-xs text-gray-600 ring-1 ring-inset ring-gray-200">최근 분기: 2025 Q1</span>
                    </div>

                    <!-- 버튼 -->
                    <button type="button"
                            class="mt-4 rounded bg-gray-200 px-4 py-2 text-sm text-gray-800 hover:bg-gray-300">
                        자세히 보기
                    </button>
                </div>
            </article>

            <!-- 카드 2 -->
            <article class="relative flex flex-col items-center">
                <!-- 상태 리본 -->
                <div class="absolute right-0 top-0">
                    <span class="rounded-bl-2xl rounded-tr-2xl bg-gray-900/90 px-3 py-1 text-xs font-medium text-white">준비 중</span>
                </div>

                <div class="aspect-[16/10] w-full rounded-t-2xl bg-gradient-to-br from-gray-100 to-gray-200/60 grid place-items-center">
                    <!-- 플레이스홀더 -->
                    <div class="h-10 w-10 rounded-xl bg-gray-300"></div>
                </div>

                <!-- 버튼 -->
                <button type="button"
                        class="mt-4 rounded bg-gray-200 px-4 py-2 text-sm text-gray-800 hover:bg-gray-300">
                    자세히 보기
                </button>
            </article>

            <!-- 카드 3 -->
            <article class="relative flex flex-col items-center">
                <div class="absolute right-0 top-0">
                    <span class="rounded-bl-2xl rounded-tr-2xl bg-gray-900/90 px-3 py-1 text-xs font-medium text-white">준비 중</span>
                </div>

                <div class="aspect-[16/10] w-full rounded-t-2xl bg-gradient-to-br from-gray-100 to-gray-200/60 grid place-items-center">
                    <div class="h-10 w-10 rounded-xl bg-gray-300"></div>
                </div>

                <!-- 버튼 -->
                <button type="button"
                        class="mt-4 rounded bg-gray-200 px-4 py-2 text-sm text-gray-800 hover:bg-gray-300">
                    자세히 보기
                </button>
            </article>
        </div>

        <!-- 구분선 -->
        <hr class="my-14 border-gray-300"/>

        <!-- ===== 하단: 부동산 매물 ===== -->
        <header class="mb-10 text-center">
            <!-- 제목 -->
            <h2 class="text-3xl font-semibold tracking-tight">부동산 매물</h2>
            <!-- 부제목 -->
            <p class="mt-2 text-sm text-gray-500">유용한 매물 보기</p>
        </header>

        <!-- 카드 3개 그리드 -->
        <div class="grid grid-cols-1 gap-10 md:grid-cols-2 xl:grid-cols-3">
            <!-- 카드 1 -->
            <article class="flex flex-col items-center">
                <div class="w-full aspect-[16/10] rounded-lg bg-gray-300"></div>
                <button type="button"
                        class="mt-4 rounded bg-gray-200 px-4 py-2 text-sm text-gray-800 hover:bg-gray-300">
                    자세히 보기
                </button>
            </article>

            <!-- 카드 2 -->
            <article class="flex flex-col items-center">
                <div class="w-full aspect-[16/10] rounded-lg bg-gray-300"></div>
                <button type="button"
                        class="mt-4 rounded bg-gray-200 px-4 py-2 text-sm text-gray-800 hover:bg-gray-300">
                    자세히 보기
                </button>
            </article>

            <!-- 카드 3 -->
            <article class="flex flex-col items-center">
                <div class="w-full aspect-[16/10] rounded-lg bg-gray-300"></div>
                <button type="button"
                        class="mt-4 rounded bg-gray-200 px-4 py-2 text-sm text-gray-800 hover:bg-gray-300">
                    자세히 보기
                </button>
            </article>
        </div>
    </div>
</div>
<!-- 챗봇 불러오기 -->
<div th:replace="chatbot/chatbot::chatbot"></div>

<footer th:replace="common/footer::footer"></footer>
</body>
</html>

<header th:fragment="header" xmlns:th="http://www.thymeleaf.org">
    <meta charset="UTF-8">

    <div id="header-id" class="w-full h-[380px] box-border"
         style="background-image: url('/images/헤더 영역 이미지.png'); background-size: cover; background-position: center;">
        <div id="header-wrapper"
             class="w-full h-[100px] hover:bg-white flex items-start justify-between text-center">

            <div class="w-[240px] h-[100px] flex justify-start items-center">
                <a href="../home/main" class="h-full flex items-center">
                    <img src="/images/로고.png"
                         class="object-contain cursor-pointer"/>
                </a>
            </div>

            <nav class="w-[60%] text-center">
                <ul id="nav-list" class="flex justify-center items-center relative space-x-4">
                    <!-- 상권 분석 -->
                    <li class="relative group w-[240px]">
                        <a href="../map/commercialZoneMap"
                           class="flex justify-center items-center w-full h-[100px] cursor-pointer">
                            <p class="text-[22px] text-black">상권 분석</p>
                        </a>
                        <ul class="sub-menu absolute items-center top-full left-1/2 transform -translate-x-1/2 hidden bg-white w-full z-10 text-center">
                            <li>
                                <a href="../map/correlationMap"
                                   class="block px-4 py-2 hover:underline">위험도 분석 상관관계</a>
                            </li>
                        </ul>
                    </li>

                    <!-- 부동산 매물 -->
                    <li class="flex justify-center items-center w-[240px] h-[100px] relative">
                        <p class="text-[22px] text-black">부동산 매물</p>
                    </li>

                    <!-- 상가 청약 -->
                    <li class="relative group w-[240px]">
                        <div class="flex justify-center items-center w-full h-[100px] cursor-pointer">
                            <p class="text-[22px] text-black">상가 청약</p>
                        </div>
                        <ul class="sub-menu absolute flex-col items-center top-full left-1/2 transform -translate-x-1/2 hidden bg-white w-full z-10 text-center">
                            <li><a href="#" class="block px-4 py-2 hover:underline">청약 알림</a></li>
                            <li><a href="#" class="block px-4 py-2 hover:underline">공고문</a></li>
                            <li><a href="../member/conditionalLogout" class="block px-4 py-2 hover:underline">로그아웃</a>
                            </li>
                        </ul>
                    </li>

                    <!-- 로그인 -->
                    <li>
                        <a href="../member/joinAndLogin"
                           class="flex justify-center items-center w-[240px] h-[100px] relative cursor-pointer">
                            <p class="text-[22px] text-black">로그인</p>
                        </a>
                    </li>

                    <!-- 알림 아이콘 -->
                    <li class="notif-wrapper" style="position:relative;">
                        <div id="notif-icon" class="cursor-pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24">
                                <g fill="none" stroke="#9990e1" stroke-linecap="round" stroke-linejoin="round"
                                   stroke-width="2">
                                    <path stroke-dasharray="4" stroke-dashoffset="4" d="M12 3v2">
                                        <animate fill="freeze" attributeName="stroke-dashoffset" dur="0.2s"
                                                 values="4;0"/>
                                    </path>
                                    <path fill="#9990e1" fill-opacity="0" stroke-dasharray="28" stroke-dashoffset="28"
                                          d="M12 5c-3.31 0 -6 2.69 -6 6l0 6c-1 0 -2 1 -2 2h8M12 5c3.31 0 6 2.69 6 6l0 6c1 0 2 1 2 2h-8">
                                        <animate fill="freeze" attributeName="fill-opacity" begin="0.9s" dur="0.5s"
                                                 values="0;1"/>
                                        <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.2s" dur="0.4s"
                                                 values="28;0"/>
                                    </path>
                                    <path stroke-dasharray="8" stroke-dashoffset="8"
                                          d="M10 20c0 1.1 0.9 2 2 2c1.1 0 2 -0.9 2 -2">
                                        <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s"
                                                 values="8;0"/>
                                    </path>
                                </g>
                            </svg>
                        </div>

                        <!-- 알림 모달 추가 -->
                        <!-- 팝업 박스: 기본은 숨김 -->
                        <div id="notif-popover" class="hidden"
                             style="position:absolute; top:110%; right:0; width:300px; max-height:60vh;
                             background:#fff; border:1px solid #e5e7eb; border-radius:12px;
                             box-shadow:0 12px 32px rgba(0,0,0,.18); overflow:hidden; z-index:1000;">
                            <header style="padding:10px 12px; background:#2563eb; color:#fff; font-weight:700;">
                                <span id="notif-title">일정 알림</span>
                            </header>
                            <div style="padding:12px; color:#111827; line-height:1.5; max-height:42vh; overflow-y:auto;">
                                <div id="notif-message">메시지가 여기에 표시됩니다.</div>
                            </div>
                            <footer style="display:flex; gap:8px; justify-content:flex-end; padding:10px 12px; background:#f3f4f6;">
                                <button id="notif-close" type="button"
                                        style="border:0; border-radius:8px; padding:8px 12px; font-weight:600; background:#e5e7eb; color:#111827;">
                                    닫기
                                </button>
                                <a id="notif-link" href="#"
                                   style="border-radius:8px; padding:8px 12px; font-weight:600; background:#2563eb; color:#fff;">
                                    자세히 보기
                                </a>
                            </footer>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>

        <div class="w-full flex justify-center items-center gap-16 mt-[100px]">
            <!-- 첫 번째 아이콘 -->
            <div class="w-[100px] h-[100px] rounded-[10px] bg-white flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="68" height="68" viewBox="0 0 24 24">
                    <path fill="#E94876" fill-rule="evenodd"
                          d="M14 20.5V4.25c0-.728-.002-1.2-.048-1.546c-.044-.325-.115-.427-.172-.484s-.159-.128-.484-.172C12.949 2.002 12.478 2 11.75 2s-1.2.002-1.546.048c-.325.044-.427.115-.484.172s-.128.159-.172.484c-.046.347-.048.818-.048 1.546V20.5z"
                          clip-rule="evenodd"/>
                    <path fill="#E94876"
                          d="M8 8.75A.75.75 0 0 0 7.25 8h-3a.75.75 0 0 0-.75.75V20.5H8zm12 5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75v6.75H20z"
                          opacity="0.7"/>
                    <path fill="#E94876" d="M1.75 20.5a.75.75 0 0 0 0 1.5h20a.75.75 0 0 0 0-1.5z" opacity="0.5"/>
                </svg>
            </div>

            <!-- 두 번째 아이콘 -->
            <div class="w-[100px] h-[100px] rounded-[10px] bg-white flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="68" height="68" viewBox="0 0 24 24">
                    <g fill="#3D9ECC">
                        <path d="M9.883 2.207a1.9 1.9 0 0 1 2.087 1.522l.025.167L12 4v7a1 1 0 0 0 .883.993L13 12h6.8a2 2 0 0 1 2 2a1 1 0 0 1-.026.226A10 10 0 1 1 9.504 2.293l.27-.067z"/>
                        <path d="M14 3.5V9a1 1 0 0 0 1 1h5.5a1 1 0 0 0 .943-1.332a10 10 0 0 0-6.11-6.111A1 1 0 0 0 14 3.5"/>
                    </g>
                </svg>
            </div>

            <!-- 세 번째 아이콘 -->
            <div class="w-[100px] h-[100px] rounded-[10px] bg-white flex items-center justify-center">
                <!-- 아이콘 고민 -->
            </div>

            <!-- 네 번째 아이콘 -->
            <div class="w-[100px] h-[100px] rounded-[10px] bg-white flex items-center justify-center">
                <!-- 아이콘 고민 -->
            </div>

            <!-- 다섯 번째 아이콘 -->
            <div class="w-[100px] h-[100px] rounded-[10px] bg-white flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="68" height="68" viewBox="0 0 24 24">
                    <g fill="none" stroke="#9990e1" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                        <path d="M12 3v2"/>
                        <path fill="#9990e1"
                              d="M12 5c-3.31 0 -6 2.69 -6 6l0 6c-1 0 -2 1 -2 2h8M12 5c3.31 0 6 2.69 6 6l0 6c1 0 2 1 2 2h-8"/>
                        <path d="M10 20c0 1.1 0.9 2 2 2c1.1 0 2 -0.9 2 -2"/>
                    </g>
                </svg>
            </div>
        </div>
    </div>

    <script>
        const headerId = document.getElementById('header-id');
        const header = document.getElementById('header-wrapper');
        const navList = document.getElementById('nav-list');
        const subMenus = document.querySelectorAll('.sub-menu');

        let hoverTimeout;

        const expandHeader = () => {
            clearTimeout(hoverTimeout);
            headerId.classList.remove('h-[100px]');
            headerId.classList.add('h-[250px]');
            header.classList.remove('h-[100px]');
            header.classList.add('h-[250px]');
            subMenus.forEach(menu => {
                menu.classList.remove('hidden');
                menu.classList.add('flex');
            });
        };

        const collapseHeader = () => {
            hoverTimeout = setTimeout(() => {
                headerId.classList.remove('h-[250px]');
                headerId.classList.add('h-[100px]');
                header.classList.remove('h-[250px]');
                header.classList.add('h-[100px]');
                subMenus.forEach(menu => {
                    menu.classList.remove('flex');
                    menu.classList.add('hidden');
                });
            }, 100);
        };

        navList.addEventListener('mouseenter', expandHeader);
        navList.addEventListener('mouseleave', collapseHeader);

        const icon = document.getElementById('notif-icon');
        const modal = document.getElementById('notif-modal');
        const closeBtn = document.getElementById('notif-close');

        icon.addEventListener('click', () => {
            modal.classList.toggle('hidden');
        });

        closeBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
        });
    </script>

</header>

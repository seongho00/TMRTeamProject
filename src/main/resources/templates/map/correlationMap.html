<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="common/head::head">
    <meta charset="UTF-8">
    <title>지도기반 유동인구에 따른 매출액과 상관관계 위험도 분석</title>
</head>
<body>
<header th:replace="common/mapHeader::header"></header>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=69544617df3febfc879cd18eed451ba3&libraries=services&autoload=false"></script>
<script type="text/javascript" th:src="@{/js/correlationMap.js}"></script>
<script type="text/javascript" th:src="@{/js/upjong.js}"></script>

<!-- 지도 불러오기 -->
<div id="map" class="w-full h-screen pt-[100px]"></div>

<!-- 선택 패널 -->
<div class="flex absolute top-[180px] left-[150px] justify-start items-start gap-2.5 px-[7px] py-1 z-10">
    <div class="flex flex-col items-center h-[615px] w-[445px] gap-[31px] pt-[30px] pb-[99px] rounded-[15px] bg-white border border-black">
        <div class="self-stretch h-[46px] px-[30px]">
            <p class="text-xl font-medium">점수 확인</p>
        </div>

        <div class="flex flex-col justify-start items-start flex-grow-0 flex-shrink-0 overflow-hidden gap-5">
            <div class="flex flex-col justify-center items-center flex-grow-0 flex-shrink-0 w-[407px] overflow-hidden gap-2.5 px-[104px] py-2.5">
                <div class="flex justify-between items-center flex-grow-0 flex-shrink-0 w-[381px] h-[41px] relative gap-2.5 px-2.5 py-[7px] rounded-[15px] bg-white border border-black relative">
                    <input id="upjongSearch" placeholder="업종을 입력해주세요"
                           class="upjongInput flex-grow flex-shrink-0 text-xl font-medium text-left focus:outline-none focus:border-none"/>

                    <svg width="22" height="22" viewBox="0 0 22 22"
                         fill="none" xmlns="http://www.w3.org/2000/svg"
                         class="flex-grow-0 flex-shrink-0 w-[21px] h-[21.5px]"
                         preserveAspectRatio="none">

                        <circle cx="9" cy="9" r="8.5" transform="matrix(-1 0 0 1 18 0)" stroke="black"></circle>
                        <path d="M15 15.5L21 21.5" stroke="black" stroke-linecap="round"></path>

                    </svg>

                    <div id="upjongSearchDrop"
                         class="absolute left-0 right-0 top-full bg-white border rounded shadow hidden max-h-60 overflow-auto z-20">
                    </div>
                </div>
            </div>

            <div class="majorSelector flex flex-col justify-center items-center flex-grow-0 flex-shrink-0 w-[407px] overflow-hidden gap-[19px]">
                <!-- 그룹 탭 -->
                <div id="upjongGroups" class="flex gap-2">
                    <button type="button" data-group="all"
                            class="chip active">전체</button>
                    <button type="button" data-group="CS100" class="chip">음식</button>
                    <button type="button" data-group="CS300" class="chip">소매</button>
                    <button type="button" data-group="CS200" class="chip">서비스</button>
                </div>

                <!-- 항목 그리드 -->
                <div id="upjongList"
                     class="grid grid-cols-2 gap-2 h-56 overflow-auto border rounded p-2 bg-white">
                    <!-- JS가 버튼들 렌더링 -->
                </div>

                <!-- 선택된 값 바인딩(기존 input 유지) -->
                <input class="upjongInput hidden">
            </div>
        </div>

        <!-- 확인 버튼 -->
        <div onclick="searchInfoByRegionAndUpjong();" class="px-[115px] py-2.5 rounded-[10px] bg-[#10f] cursor-pointer">
            <p class="text-xl font-medium text-white">확인</p>
        </div>

        <!-- 결과 패널 -->
        <div class="px-[53px]">
            <div id="riskResult"
                 class="hidden min-w-[205px] min-h-[120px] p-3 rounded-[6px] border border-gray-300 bg-white text-sm">
                확인 입력 시 위험도 표시
            </div>
        </div>
    </div>

    <div class="middleSelector hidden w-[386px] h-[200px] px-[10px] rounded-[15px] bg-white border border-black">
        <ul class="w-full overflow-auto p-2.5"></ul>
    </div>

    <div class="minorSelector hidden w-[386px] h-[200px] px-[23px] py-[13px] rounded-[15px] bg-white border border-black">
        <ul class="w-full overflow-auto p-2.5"></ul>
    </div>
</div>

<!-- 지역 선택 UI -->
<ul class="flex justify-between items-center w-[450px] h-[47px] overflow-hidden px-[10px] py-[15px] rounded-[10px] bg-white border border-black absolute left-1/2 -translate-x-1/2 top-[110px] z-10">
    <li class="flex justify-center items-center h-[41px] cursor-pointer">
        <select class="flex justify-center items-center text-[22px] text-center text-black cursor-pointer focus:outline-none focus:ring-0 focus:border-transparent"
                name="sidoSelect"
                id="sidoSelect">
            <option>서울특별시</option>
        </select>
    </li>

    <li class="flex justify-center items-center h-[41px]  ">
        <select class="flex justify-center items-center text-[22px] text-center text-black cursor-pointer focus:outline-none focus:ring-0 focus:border-transparent"
                name="sggSelect"
                id="sggSelect">
            <option value="">시/군/구</option>
            <th:block th:each="adminDong : ${adminDongsGroupBySggCd}">
                <option th:value="${adminDong.sggNm}" th:text="${adminDong.sggNm}"></option>
            </th:block>
        </select>
    </li>

    <li class="flex justify-center items-center h-[41px] ">
        <select class="flex justify-center items-center text-[22px] text-center text-black cursor-pointer focus:outline-none focus:ring-0 focus:border-transparent"
                name="emdSelect"
                id="emdSelect">
            <option>행정동</option>
        </select>
    </li>
</ul>
</body>
</html>
